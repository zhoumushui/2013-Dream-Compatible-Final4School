<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
    <head>
        <title>织梦</title>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
        <link rel="stylesheet" href="css/style.css" type="text/css" media="screen"/>
        <style>
          span.reference{
            position:fixed;
            top:10px;
            right:10px;
            font-size:9px;
          }
          span.reference a{
            color:#aaa;
            text-decoration:none;
			text-transform:uppercase;
			margin-left:10px;
          }
          span.reference a:hover{
              color:#ddd;
          }
		  h1.title{
			text-indent:-9000px;
			background:transparent url(title.png) no-repeat top left;
			width:640px;
			height:52px;
			position:absolute;
			top:15px;
			left:15px;
		  }  
      </style>
    </head>
    <body>
		<div id="ps_slider" class="ps_slider">
			<a class="prev disabled"></a>
			<a class="next disabled"></a>
			<div id="ps_albums">
				<div class="ps_album" style="opacity:0;"><img src="albums/album1/thumb/thumb.jpg" alt=""/>
			  <div class="ps_desc" onclick="javascript:window.open('../ifstory/gsliuyang.html','_parent');"><h2>太空玫瑰</h2><span>高挑的身材，干练的短发，一身戎装，行如风，站如松，2月7日晚，央视2013年春晚最后一次彩排，李玉刚一曲婉转的《嫦娥》唱罢，神九航天员刘洋和景海鹏、刘旺等出现在舞台上，脸上绽放着如阳光般和煦灿烂的笑容。</span></div></div>
				<div class="ps_album" style="opacity:0;"><img src="albums/album2/thumb/thumb.jpg" alt=""/><div class="ps_desc" onclick="javascript:window.open('../ifstory/gsliyanhong.html','_parent');"><h2>百度总裁</h2><span> “如果把财富看得更广义一点的话，它应该意味着幸福才对。金钱不是最重要的，重要的是你是不是在做你喜欢做的事情，是不是有一个幸福的生活。在我看来，幸福是更重要的。很多人在温饱线上挣扎的时候不见得能够理解这种想法，但是一旦有一个相对稳定的生活时，仔细想想，这个是非常重要的。”</span></div></div>
				<div class="ps_album" style="opacity:0;"><img src="albums/album3/thumb/thumb.jpg" alt=""/><div class="ps_desc" onclick="javascript:window.open('../ifstory/gszhuangshihua.html','_parent');"><h2>当代雷锋</h2><span>在刚刚结束的纪念毛泽东等老一辈革命家为雷锋同志题词五十周年座谈会上，武警新疆总队医院院长庄仕华被中央文明委授予“当代雷锋”荣誉称号。扎根边疆倾情奉献40载，120640例手术无一失误，长年为各族群众送医送药行程40多万公里，多年来巡诊近百万人次……这位新时代的“雷锋”究竟有着怎样的故事，让边疆47个民族的人民群众提起来赞不绝口、感激涕零？</span></div></div>
				<div class="ps_album" style="opacity:0;"><img src="albums/album4/thumb/thumb.jpg" alt=""/><div class="ps_desc" onclick="javascript:window.open('../ifstory/gslijiaming.html','_parent');"><h2>逐梦青春</h2><span>“青年人创业，我认为不是可以‘教’出来的，而是自己‘闯’出来的。如果真的有一颗创业的心，那么任何困难都阻挡不了你。”一聊起青年，李佳鸣更加充满热情，“有梦想很重要，更重要的是有耐心和韧劲，脚踏实地走好每一步。”</span></div></div>
				<div class="ps_album" style="opacity:0;"><img src="albums/album5/thumb/thumb.jpg" alt=""/><div class="ps_desc" onclick="javascript:window.open('../ifstory/gszhangchunli.html','_parent');"><h2>优秀民工</h2><span>“要做就做最好的农民工”，张春丽给自己定下了目标。
        辛勤的工作让她所获得的荣誉接踵而至：连续3年被公司评为“优秀员工”；2008年被授予广东省“优秀农民工”荣誉称号；2009年被选为“感动湖城十大人物”之一；同年获得“全国五一劳动奖章”，并且在所有获奖者中，她是最年轻的一个；2010年，又被选为第十一届中华全国青联委员；2010年9月6日，在深圳特区30周年庆典活动上，作为深圳市优秀劳务代表张春丽更是受到了胡锦涛总书记的亲切接见。</span></div></div>
				<div class="ps_album" style="opacity:0;"><img src="albums/album6/thumb/thumb.jpg" alt=""/><div class="ps_desc" onclick="javascript:window.open('../ifstory/gssunbo.html','_parent');"><h2>石油报国</h2><span>孙波1960年2月6日出生于辽宁省复县，从青年时代起，就树立了“石油报国”的远大理想。1983年7月，从华东石油学院采油工程专业毕业的孙波，被分配到辽河石油勘探局工作。他把铁人王进喜当做偶像，积极弘扬大庆精神、铁人精神，不断克服技术难题。他从沈阳采油厂一个普通的攻关队副队长，很快成为了厂长兼党委副书记，成为了我国当时最年轻的采油厂厂长。</span></div></div>
				<div class="ps_album" style="opacity:0;"><img src="albums/album7/thumb/thumb.jpg" alt=""/><div class="ps_desc" onclick="javascript:window.open('../ifstory/gsliuyingjun.html','_parent');"><h2>梦圆西藏</h2><span>十年前，当听到“西藏”两字时，大家能联想到的是：西藏地处高寒，民风纯朴；一座座覆雪的山峰，褐红色横亘绵延的沙砾山峦；强烈直射的阳光，异常干燥的空气，凛烈干冷的风；风中呼呼作响的经幡，向天地表达吉祥如意祈祷的洁白哈达……或许，这也是我们大部分人心中的西藏轮廓。</span></div></div>
				<div class="ps_album" style="opacity:0;"><img src="albums/album8/thumb/thumb.jpg" alt=""/><div class="ps_desc" onclick="javascript:window.open('../ifstory/gsyeqingping.html','_parent');"><h2>创业先锋</h2><span>安徽自古便是文化之乡，生长在那方水土的人血液中自然也会流淌着淡淡的文化气息。初见叶庆平，便觉得正是印证了那句“一方水土养育一方人”的谚语，微微一笑不失儒雅，举手投足不失风度。他请记者进门落座，自己烧水，熟练地沏上一壶龙井。沸水冲击茶叶，茶香便随着水汽飘然而出，瞬间散漫整间办公室，使原本稳重的清式家具多了一份活力。办公室的墙上挂着字画，条案上堆满了关于山水画与中国艺术相关的书籍，如此的布置很难与眼前的80后叶庆平联系在一起。</span></div></div>
				<div class="ps_album" style="opacity:0;"><img src="albums/album9/thumb/thumb.jpg" alt=""/><div class="ps_desc" onclick="javascript:window.open('../ifstory/gszhangtao.html','_parent');"><h2>康巴汉子</h2><span>头戴“英雄结”，腰挎宝刀，平均身高在180厘米以上，古铜肤色；剽悍好斗又恩怨分明，一言不合立刻横刀立马，宝刀出鞘，刀不嗜血绝不回——— 这就是传说中的康巴汉子。</span></div></div>
			</div>	
		</div>
		
		<div id="ps_overlay" class="ps_overlay" style="display:none;"></div>
		<a id="ps_close" class="ps_close" style="display:none;"></a>
		<div id="ps_container" class="ps_container" style="display:none;">
			<a id="ps_next_photo" class="ps_next_photo" style="display:none;"></a>
		</div>
	

        <!-- The JavaScript -->
        <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>
		<script type="text/javascript">
            $(function() {
				/**
				* navR,navL are flags for controlling the albums navigation
				* first gives us the position of the album on the left
				* positions are the left positions for each of the 5 albums displayed at a time
				*/
                var navR,navL	= false;
				var first		= 1;
				var positions 	= {
					'0'		: 0,
					'1' 	: 170,
					'2' 	: 340,
					'3' 	: 510,
					'4' 	: 680
				}
				var $ps_albums 		= $('#ps_albums');
				/**
				* number of albums available
				*/
				var elems			= $ps_albums.children().length;
				var $ps_slider		= $('#ps_slider');
				
				/**
				* let's position all the albums on the right side of the window
				*/
				var hiddenRight 	= $(window).width() - $ps_albums.offset().left;
				$ps_albums.children('div').css('left',hiddenRight + 'px');
				
				/**
				* move the first 5 albums to the viewport
				*/
				$ps_albums.children('div:lt(5)').each(
					function(i){
						var $elem = $(this);
						$elem.animate({'left': positions[i] + 'px','opacity':1},800,function(){
							if(elems > 5)
								enableNavRight();
						});
					}
				);
				
				/**
				* next album
				*/
				$ps_slider.find('.next').bind('click',function(){
					if(!$ps_albums.children('div:nth-child('+parseInt(first+5)+')').length || !navR) return;
					disableNavRight();
					disableNavLeft();
					moveRight();
				});
				
				/**
				* we move the first album (the one on the left) to the left side of the window
				* the next 4 albums slide one position, and finally the next one in the list
				* slides in, to fill the space of the first one
				*/
				function moveRight () {
					var hiddenLeft 	= $ps_albums.offset().left + 163;
					
					var cnt = 0;
					$ps_albums.children('div:nth-child('+first+')').animate({'left': - hiddenLeft + 'px','opacity':0},500,function(){
							var $this = $(this);
							$ps_albums.children('div').slice(first,parseInt(first+4)).each(
								function(i){
									var $elem = $(this);
									$elem.animate({'left': positions[i] + 'px'},800,function(){
										++cnt;
										if(cnt == 4){
											$ps_albums.children('div:nth-child('+parseInt(first+5)+')').animate({'left': positions[cnt] + 'px','opacity':1},500,function(){
												//$this.hide();
												++first;
												if(parseInt(first + 4) < elems)
													enableNavRight();
												enableNavLeft();
											});
										}		
									});
								}
							);		
					});
				}
				
				/**
				* previous album
				*/
				$ps_slider.find('.prev').bind('click',function(){
					if(first==1  || !navL) return;
					disableNavRight();
					disableNavLeft();
					moveLeft();
				});
				
				/**
				* we move the last album (the one on the right) to the right side of the window
				* the previous 4 albums slide one position, and finally the previous one in the list
				* slides in, to fill the space of the last one
				*/
				function moveLeft () {
					var hiddenRight 	= $(window).width() - $ps_albums.offset().left;
				
					var cnt = 0;
					var last= first+4;
					$ps_albums.children('div:nth-child('+last+')').animate({'left': hiddenRight + 'px','opacity':0},500,function(){
							var $this = $(this);
							$ps_albums.children('div').slice(parseInt(last-5),parseInt(last-1)).each(
								function(i){
									var $elem = $(this);
									$elem.animate({'left': positions[i+1] + 'px'},800,function(){
										++cnt;
										if(cnt == 4){
											$ps_albums.children('div:nth-child('+parseInt(last-5)+')').animate({'left': positions[0] + 'px','opacity':1},500,function(){
												//$this.hide();
												--first;
												enableNavRight();
												if(first > 1)
													enableNavLeft();
											});
										}										
									});
								}
							);
					});
				}
				
				/**
				* disable or enable albums navigation
				*/
				function disableNavRight () {
					navR = false;
					$ps_slider.find('.next').addClass('disabled');
				}
				function disableNavLeft () {
					navL = false;
					$ps_slider.find('.prev').addClass('disabled');
				}
				function enableNavRight () {
					navR = true;
					$ps_slider.find('.next').removeClass('disabled');
				}
				function enableNavLeft () {
					navL = true;
					$ps_slider.find('.prev').removeClass('disabled');
				}		
				
				var $ps_container 	= $('#ps_container');
				var $ps_overlay 	= $('#ps_overlay');
				var $ps_close		= $('#ps_close');
				/**
				* when we click on an album,
				* we load with AJAX the list of pictures for that album.
				* we randomly rotate them except the last one, which is
				* the one the User sees first. We also resize and center each image.
				*/
				$ps_albums.children('div').bind('click',function(){
					var $elem = $(this);
					var album_name 	= 'album' + parseInt($elem.index() + 1);
					var $loading 	= $('<div />',{className:'loading'});
					$elem.append($loading);
					$ps_container.find('img').remove();
					$.get('photostack.php', {album_name:album_name} , function(data) {
						var items_count	= data.length;
						for(var i = 0; i < items_count; ++i){
							var item_source = data[i];
							var cnt 		= 0;
							$('<img />').load(function(){
								var $image = $(this);
								++cnt;
								resizeCenterImage($image);
								$ps_container.append($image);
								var r		= Math.floor(Math.random()*41)-20;
								if(cnt < items_count){
									$image.css({
										'-moz-transform'	:'rotate('+r+'deg)',
										'-webkit-transform'	:'rotate('+r+'deg)',
										'transform'			:'rotate('+r+'deg)'
									});
								}
								if(cnt == items_count){
									$loading.remove();
									$ps_container.show();
									$ps_close.show();
									$ps_overlay.show();
								}
							}).attr('src',item_source);
						}
					},'json');
				});
				
				/**
				* when hovering each one of the images, 
				* we show the button to navigate through them
				*/
				$ps_container.live('mouseenter',function(){
					$('#ps_next_photo').show();
				}).live('mouseleave',function(){
					$('#ps_next_photo').hide();
				});
				
				/**
				* navigate through the images: 
				* the last one (the visible one) becomes the first one.
				* we also rotate 0 degrees the new visible picture 
				*/
				$('#ps_next_photo').bind('click',function(){
					var $current 	= $ps_container.find('img:last');
					var r			= Math.floor(Math.random()*41)-20;
					
					var currentPositions = {
						marginLeft	: $current.css('margin-left'),
						marginTop	: $current.css('margin-top')
					}
					var $new_current = $current.prev();
					
					$current.animate({
						'marginLeft':'250px',
						'marginTop':'-385px'
					},250,function(){
						$(this).insertBefore($ps_container.find('img:first'))
							   .css({
									'-moz-transform'	:'rotate('+r+'deg)',
									'-webkit-transform'	:'rotate('+r+'deg)',
									'transform'			:'rotate('+r+'deg)'
								})
							   .animate({
									'marginLeft':currentPositions.marginLeft,
									'marginTop'	:currentPositions.marginTop
									},250,function(){
										$new_current.css({
											'-moz-transform'	:'rotate(0deg)',
											'-webkit-transform'	:'rotate(0deg)',
											'transform'			:'rotate(0deg)'
										});
							   });
					});
				});
				
				/**
				* close the images view, and go back to albums
				*/
				$('#ps_close').bind('click',function(){
					$ps_container.hide();
					$ps_close.hide();
					$ps_overlay.fadeOut(400);
				});
				
				/**
				* resize and center the images
				*/
				function resizeCenterImage($image){
					var theImage 	= new Image();
					theImage.src 	= $image.attr("src");
					var imgwidth 	= theImage.width;
					var imgheight 	= theImage.height;
					
					var containerwidth  = 460;
					var containerheight = 330;
					
					if(imgwidth	> containerwidth){
						var newwidth = containerwidth;
						var ratio = imgwidth / containerwidth;
						var newheight = imgheight / ratio;
						if(newheight > containerheight){
							var newnewheight = containerheight;
							var newratio = newheight/containerheight;
							var newnewwidth =newwidth/newratio;
							theImage.width = newnewwidth;
							theImage.height= newnewheight;
						}
						else{
							theImage.width = newwidth;
							theImage.height= newheight;
						}
					}
					else if(imgheight > containerheight){
						var newheight = containerheight;
						var ratio = imgheight / containerheight;
						var newwidth = imgwidth / ratio;
						if(newwidth > containerwidth){
							var newnewwidth = containerwidth;
							var newratio = newwidth/containerwidth;
							var newnewheight =newheight/newratio;
							theImage.height = newnewheight;
							theImage.width= newnewwidth;
						}
						else{
							theImage.width = newwidth;
							theImage.height= newheight;
						}
					}
					$image.css({
						'width'			:theImage.width,
						'height'		:theImage.height,
						'margin-top'	:-(theImage.height/2)-10+'px',
						'margin-left'	:-(theImage.width/2)-10+'px'	
					});
				}
            });
        </script>
    </body>
</html>